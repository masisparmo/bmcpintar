<!DOCTYPE html>
<html lang="id" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMC Pro - Aplikasi Business Model Canvas powered by AI</title>
    <link rel="icon" type="image/png" href="favicon-32x32.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'] } } }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .bmc-grid { display: grid; grid-template-columns: repeat(10, 1fr); grid-template-rows: repeat(3, minmax(180px, auto)); gap: 0.75rem; }
        .area-kp { grid-column: 1 / 3; grid-row: 1 / 3; } .area-ka { grid-column: 3 / 5; grid-row: 1 / 2; } .area-kr { grid-column: 3 / 5; grid-row: 2 / 3; } .area-vp { grid-column: 5 / 7; grid-row: 1 / 3; } .area-cr { grid-column: 7 / 9; grid-row: 1 / 2; } .area-ch { grid-column: 7 / 9; grid-row: 2 / 3; } .area-cs { grid-column: 9 / 11; grid-row: 1 / 3; } .area-cst { grid-column: 1 / 6; grid-row: 3 / 4; } .area-rs { grid-column: 6 / 11; grid-row: 3 / 4; }
        @media (max-width: 1024px) { .bmc-grid { display: flex; flex-direction: column; } .bmc-box { min-height: 150px; } }
        .bmc-box:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .bmc-box { transition: all 0.2s; }
        .prose h3 { font-weight: 700; margin-top: 1em; color: #1f2937; font-size: 1.1rem; } .dark .prose h3 { color: #e5e7eb; }
        .prose ul { list-style: disc; padding-left: 1.2em; } .dark .prose { color: #d1d5db; }
        .loading-overlay { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(4px); } .dark .loading-overlay { background: rgba(17, 24, 39, 0.95); }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .toast { animation: slideIn 0.3s ease-out forwards; }
        .custom-scroll::-webkit-scrollbar { width: 4px; } .custom-scroll::-webkit-scrollbar-thumb { background-color: #ccc; border-radius: 4px; }

        /* Typing Indicator */
        .typing-indicator { display: flex; align-items: center; gap: 4px; padding: 10px 15px; background: #e0e7ff; border-radius: 12px; width: fit-content; }
        .dark .typing-indicator { background: #374151; }
        .typing-dot { width: 6px; height: 6px; background: #6366f1; border-radius: 50%; animation: typing 1.4s infinite ease-in-out both; }
        .dark .typing-dot { background: #a5b4fc; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        /* Progress Bar */
        .progress-container { width: 100%; background-color: #e5e7eb; border-radius: 9999px; overflow: hidden; height: 8px; margin-top: 10px; }
        .dark .progress-container { background-color: #4b5563; }
        .progress-bar { height: 100%; background-color: #2563eb; width: 0%; animation: progressIndeterminate 2s infinite ease-in-out; }
        @keyframes progressIndeterminate { 0% { width: 0%; margin-left: 0; } 50% { width: 70%; margin-left: 15%; } 100% { width: 0%; margin-left: 100%; } }

        /* Chat & Markdown Fixes */
        .prose pre {
            white-space: pre-wrap !important;       /* Wrap long lines in code blocks */
            word-wrap: break-word !important;       /* Break long words */
            background-color: #1e293b !important;   /* Dark background for contrast */
            color: #e2e8f0 !important;              /* Light text */
            padding: 1rem !important;
            border-radius: 0.5rem !important;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace !important; /* Distinct font */
            margin-top: 0.75em !important;
            margin-bottom: 0.75em !important;
            overflow-x: hidden !important;          /* Prevent horizontal scroll, force wrap */
        }
        /* Custom "Rich Prompt" Box */
        .rich-prompt-box {
            background-color: #f8fafc;
            border-left: 4px solid #4f46e5;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
            font-family: 'Inter', sans-serif; /* Back to normal font for readability */
            color: #334155;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .dark .rich-prompt-box {
            background-color: #1e293b;
            border-left-color: #818cf8;
            color: #e2e8f0;
        }
        .rich-prompt-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            font-weight: bold;
            color: #4f46e5;
            margin-bottom: 0.5rem;
            display: block;
            letter-spacing: 0.05em;
        }
        .dark .rich-prompt-label { color: #818cf8; }

        .prose code {
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            background-color: rgba(0,0,0,0.05);
            padding: 0.2em 0.4em;
            border-radius: 0.25em;
            font-size: 0.9em;
            font-weight: 600;
            color: #d946ef; /* Fuchsia-600 for visibility */
        }
        .dark .prose code {
            background-color: rgba(255,255,255,0.1);
            color: #f0abfc;
        }
        .prose pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
            font-size: inherit;
            font-weight: normal;
        }
    </style>
</head>
<body class="text-gray-800 bg-gray-50 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">

    <div id="toastContainer" class="fixed top-20 right-5 z-[100] flex flex-col gap-2"></div>
    <input type="file" id="fileInput" class="hidden" accept=".sbmc">

    <!-- Navbar (Desktop) -->
    <nav class="bg-white dark:bg-gray-800 shadow border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <img src="logo-bmc_pintar_ku.png" alt="Logo" class="h-10 w-auto">
                    <h1 class="text-lg font-bold text-gray-900 dark:text-white">Smart BMC <span class="text-xs font-normal opacity-70">Pro</span></h1>
                </div>

                <div class="hidden xl:flex items-center space-x-2">
                    <button onclick="window.openSettings()" class="text-gray-500 hover:text-blue-600 p-2 rounded-lg transition" title="Pengaturan API"><i class="fas fa-cog text-xl"></i></button>
                    <button onclick="window.openHistory()" class="text-gray-500 hover:text-blue-600 p-2 rounded-lg transition" title="Riwayat"><i class="fas fa-history text-xl"></i></button>
                    <button onclick="window.openInfo()" class="text-gray-500 hover:text-blue-600 text-sm font-medium px-2 uppercase">Panduan</button>
                    <button onclick="window.toggleTheme()" class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"><i id="themeIcon" class="fas fa-moon text-xl"></i></button>
                    <span class="h-6 w-px bg-gray-300 dark:bg-gray-600 mx-1"></span>

                    <select id="userStage" onchange="window.syncStage(this.value)" class="bg-gray-50 border border-gray-300 text-sm rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white w-32">
                        <option value="aspiring">ðŸŒ± Ideasi</option>
                        <option value="beginner">ðŸš€ Start-up</option>
                        <option value="scaleup">ðŸ“ˆ Scale-up</option>
                    </select>

                    <button onclick="window.openAiPrompt()" class="bg-indigo-100 text-indigo-700 hover:bg-indigo-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">CONTOH</button>
                    <button onclick="window.openImgPrompt()" class="bg-purple-100 text-purple-700 hover:bg-purple-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">PROMPT GAMBAR</button>
                    <button onclick="window.saveToHistory(true)" class="bg-teal-100 text-teal-700 hover:bg-teal-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">SIMPAN</button>
                    <button onclick="window.downloadReport()" class="bg-green-100 text-green-700 hover:bg-green-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">PRINT PDF</button>

                    <!-- EXPORT IMPORT -->
                    <button onclick="window.exportData()" class="bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">EXPORT</button>
                    <button onclick="document.getElementById('fileInput').click()" class="bg-orange-100 text-orange-700 hover:bg-orange-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">IMPORT</button>

                    <!-- CLEAR DATA (Now a Solid Button) -->
                    <button onclick="window.confirmReset()" class="bg-red-100 text-red-700 hover:bg-red-200 px-3 py-2 rounded-lg text-xs font-bold transition uppercase">CLEAR DATA</button>
                </div>

                <div class="xl:hidden flex items-center gap-2">
                    <button onclick="window.openHistory()" class="p-2 text-gray-500"><i class="fas fa-history text-lg"></i></button>
                    <button onclick="window.openSettings()" class="p-2 text-gray-500"><i class="fas fa-cog text-lg"></i></button>
                    <button onclick="window.toggleTheme()" class="p-2 text-gray-500"><i id="themeIconMobile" class="fas fa-moon text-lg"></i></button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Controls (Redesigned with Solid Buttons) -->
    <div class="xl:hidden bg-white dark:bg-gray-800 p-4 border-b dark:border-gray-700 space-y-3">
        <!-- Row 1: Dropdown -->
        <select id="userStageMobile" onchange="window.syncStage(this.value)" class="w-full bg-gray-50 border border-gray-300 text-sm rounded-lg p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
            <option value="aspiring">ðŸŒ± Ideasi (Belum ada bisnis)</option>
            <option value="beginner">ðŸš€ Start-up (Baru berjalan)</option>
            <option value="scaleup">ðŸ“ˆ Scale-up (Ingin ekspansi)</option>
        </select>

        <!-- Row 2: Main Actions (4 cols) -->
        <div class="grid grid-cols-4 gap-2">
            <button onclick="window.openAiPrompt()" class="bg-indigo-100 text-indigo-700 py-3 rounded text-[10px] font-bold uppercase flex flex-col items-center justify-center hover:bg-indigo-200">CONTOH</button>
            <button onclick="window.saveToHistory(true)" class="bg-teal-100 text-teal-700 py-3 rounded text-[10px] font-bold uppercase flex flex-col items-center justify-center hover:bg-teal-200">SIMPAN</button>
            <button onclick="document.getElementById('fileInput').click()" class="bg-orange-100 text-orange-700 py-3 rounded text-[10px] font-bold uppercase flex flex-col items-center justify-center hover:bg-orange-200">IMPORT</button>
            <button onclick="window.downloadReport()" class="bg-green-100 text-green-700 py-3 rounded text-[10px] font-bold uppercase flex flex-col items-center justify-center hover:bg-green-200">PRINT PDF</button>
        </div>

        <!-- Row 3: Secondary Actions (Solid Buttons) -->
        <div class="grid grid-cols-3 gap-2">
            <button onclick="window.exportData()" class="bg-blue-100 text-blue-700 py-3 rounded text-[10px] font-bold uppercase flex items-center justify-center hover:bg-blue-200">EXPORT</button>
            <button onclick="window.openImgPrompt()" class="bg-purple-100 text-purple-700 py-3 rounded text-xs font-bold uppercase flex items-center justify-center hover:bg-purple-200">GAMBAR</button>
            <button onclick="window.confirmReset()" class="bg-red-100 text-red-700 py-3 rounded text-xs font-bold uppercase flex items-center justify-center hover:bg-red-200">CLEAR</button>
        </div>

        <button onclick="window.openInfo()" class="w-full text-center text-xs text-gray-500 underline pt-1 uppercase">Panduan Lengkap BMC</button>
    </div>

    <main class="max-w-7xl mx-auto px-4 py-6">
        <div class="mb-6">
            <label class="block text-sm font-bold mb-1 dark:text-gray-300">Nama Bisnis / Pemilik</label>
            <input type="text" id="userName" placeholder="Contoh: Kopi Senja / Budi Santoso" class="w-full p-3 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" oninput="window.saveState()">
        </div>

        <div class="bmc-grid mb-10" id="canvasGrid"></div>

        <div class="flex flex-col items-center justify-center mb-10 gap-4">
            <button onclick="window.analyzeData()" id="analyzeBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105 w-full max-w-md uppercase">Analisa Bisnis Saya</button>

            <div class="flex gap-4 w-full max-w-md">
                <button onclick="window.generateSWOT()" id="swotBtn" class="flex-1 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg shadow transition transform hover:scale-105 text-sm uppercase">Analisa SWOT</button>
                <button onclick="window.generatePitchDeck()" id="pitchBtn" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow transition transform hover:scale-105 text-sm uppercase">Pitch Deck</button>
            </div>
            <button onclick="window.openActionPlan()" class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105 w-full max-w-md uppercase">Action Plan (Rencana Aksi)</button>
        </div>

        <div id="analysisSection" class="hidden grid lg:grid-cols-2 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700 flex flex-col h-[500px]">
                <div class="p-4 bg-indigo-600 text-white font-bold flex justify-between items-center">
                    <div class="flex items-center gap-2">
                        <span><i class="fas fa-clipboard-check mr-2"></i> Hasil Analisa</span>
                        <button onclick="window.openEditAnalysis()" class="text-xs bg-white/20 hover:bg-white/30 text-white px-2 py-1 rounded transition uppercase" title="Edit Hasil Analisa"><i class="fas fa-edit"></i> Edit</button>
                    </div>
                    <span id="stageLabel" class="text-xs bg-white/20 px-2 py-1 rounded">Umum</span>
                </div>
                <div id="analysisContent" class="p-5 flex-grow overflow-y-auto custom-scroll prose dark:prose-invert max-w-none text-sm"></div>
            </div>

            <div class="bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700 flex flex-col h-[500px]">
                <div class="p-4 bg-gray-800 text-white font-bold flex justify-between items-center">
                    <span><i class="fas fa-comments mr-2"></i> Chat Konsultasi</span>
                    <button onclick="window.clearChat()" class="text-xs bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded transition uppercase" title="Hapus Riwayat Chat"><i class="fas fa-trash"></i> CLEAR</button>
                </div>
                <div id="chatHistory" class="p-4 flex-grow overflow-y-auto custom-scroll space-y-3 bg-gray-50 dark:bg-gray-900/50">
                    <div class="flex items-start gap-2">
                        <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold">AI</div>
                        <div class="bg-white dark:bg-gray-700 p-3 rounded-lg border dark:border-gray-600 text-sm shadow-sm max-w-[85%] dark:text-white">Halo! Ada yang ingin didiskusikan?</div>
                    </div>
                </div>
                <div class="p-3 border-t dark:border-gray-700">
                    <form onsubmit="window.sendChat(event)" class="flex gap-2">
                        <input id="chatInput" type="text" placeholder="Tanya sesuatu..." class="flex-grow p-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm">
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-bold uppercase">Kirim</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- ============ MODALS ============ -->

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-4 dark:text-white"><i class="fas fa-cog mr-2"></i> Pengaturan API</h3>

            <div class="mb-4">
                <label class="block text-sm font-bold mb-2 dark:text-gray-300">Gemini API Key</label>
                <div class="relative">
                    <input type="password" id="apiKeyInput" placeholder="AIzaSy..." class="w-full p-3 border border-gray-300 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none pr-10">
                    <button onclick="window.toggleKeyVisibility()" class="absolute right-3 top-3 text-gray-500 hover:text-blue-600 focus:outline-none">
                        <i id="eyeIcon" class="fas fa-eye"></i>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-1">Key disimpan di browser Anda (Local Storage).</p>
            </div>

            <div class="bg-blue-50 dark:bg-gray-700 p-4 rounded-lg mb-6 text-sm">
                <strong class="block text-blue-800 dark:text-blue-300 mb-2">Cara Mendapatkan API Key Gratis:</strong>
                <ol class="list-decimal pl-4 space-y-1 text-gray-700 dark:text-gray-300">
                    <li>Kunjungi <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-blue-600 dark:text-blue-400 underline">Google AI Studio</a>.</li>
                    <li>Login dengan akun Google Anda.</li>
                    <li>Klik tombol <strong>"Create API key"</strong>.</li>
                    <li>Salin kode tersebut dan tempel di sini.</li>
                </ol>
            </div>

            <div class="flex justify-end gap-2">
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 uppercase">Batal</button>
                <button onclick="window.saveSettings()" class="px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 font-bold shadow-lg transform hover:scale-105 transition uppercase">Simpan</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl p-6 h-[70vh] flex flex-col" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4">
                <div class="flex items-center gap-4">
                    <h3 class="text-lg font-bold dark:text-white"><i class="fas fa-history mr-2"></i> Riwayat BMC</h3>
                    <button onclick="window.deleteAllHistory()" class="text-xs bg-red-100 text-red-700 hover:bg-red-200 px-2 py-1 rounded font-bold uppercase transition">Hapus Semua</button>
                </div>
                <button onclick="window.closeModals()" class="text-gray-500 hover:text-red-500 text-xl"><i class="fas fa-times"></i></button>
            </div>
            <div class="flex-grow overflow-y-auto custom-scroll bg-gray-50 dark:bg-gray-700/50 rounded-lg p-2">
                <table class="w-full text-sm text-left dark:text-gray-200">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-200 dark:bg-gray-700 dark:text-gray-400 sticky top-0">
                        <tr>
                            <th class="px-4 py-3 rounded-tl-lg">Nama & Tanggal</th>
                            <th class="px-4 py-3 text-right rounded-tr-lg">Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="historyList">
                        <!-- Items injected here -->
                    </tbody>
                </table>
                <div id="emptyHistory" class="hidden text-center py-10 text-gray-500">Belum ada riwayat tersimpan.</div>
            </div>
        </div>
    </div>

    <!-- Info Modal (UPDATED: SUPER DETAIL) -->
    <div id="infoModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl p-0 overflow-hidden max-h-[90vh] flex flex-col" onclick="event.stopPropagation()">
            <div class="bg-blue-600 px-6 py-4 flex justify-between items-center shrink-0">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-book-open mr-2"></i> Kuliah Singkat BMC (Lengkap)</h3>
                <button onclick="window.closeModals()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto custom-scroll">
                <div class="prose dark:prose-invert max-w-none text-sm space-y-8">

                    <div class="mb-8">
                        <p><strong>BMC</strong> atau <strong>Business Model Canvas</strong> adalah alat visual yang digunakan untuk merancang, menggambarkan, dan menganalisis model bisnis suatu perusahaan atau usaha. Alat ini dikembangkan oleh <em>Alexander Osterwalder</em> dan telah menjadi alat yang populer digunakan oleh pengusaha, manajer bisnis, dan perusahaan startup.</p>

                        <p>Framework ini memiliki konsep yang jauh lebih ringkas dibandingkan dengan business plan lainnya, karena hanya disusun ke dalam satu halaman saja. Tak heran, Business Model Canvas adalah salah satu model bisnis yang populer di kalangan pebisnis.</p>

                        <h3>Tujuan Business Model Canvas</h3>
                        <p>Tujuan utama dari Business Model Canvas adalah menyediakan panduan yang mudah dipahami untuk mengidentifikasi kekuatan, kelemahan, serta peluang di pasar, sehingga perusahaan dapat mengembangkan strategi yang lebih inovatif dan adaptif.</p>

                        <p>Dengan memetakan sembilan elemen intiâ€”seperti segmen pelanggan, proposisi nilai, dan sumber daya utamaâ€”Business Model Canvas membantu pelaku bisnis memahami hubungan antar elemen dan menentukan fokus untuk meningkatkan kinerja.</p>

                        <p>Menggunakan contoh Business Model Canvas yang tepat juga memungkinkan perusahaan untuk mempelajari cara mengembangkan solusi yang relevan dan sesuai kebutuhan pelanggan, sehingga mendorong pertumbuhan bisnis yang berkelanjutan.</p>
                    </div>

                    <!-- Intro Analogy -->
                    <div class="bg-blue-50 dark:bg-gray-700 p-5 rounded-xl border-l-4 border-blue-500">
                        <h4 class="text-blue-800 dark:text-blue-300 font-bold text-lg mb-2">Apa itu BMC? (Analogi Rumah Makan)</h4>
                        <p class="text-gray-700 dark:text-gray-200 text-base">
                            Bayangkan bisnis itu seperti sebuah <strong>Rumah Makan</strong>.
                            <br>BMC membagi rumah makan itu menjadi 3 area utama:
                            <ul class="mt-2 list-disc pl-5">
                                <li><strong>Panggung Depan (Front Stage):</strong> Ruang makan di mana Anda melayani tamu (Pelanggan, Channel, Hubungan).</li>
                                <li><strong>Panggung Belakang (Back Stage):</strong> Dapur tempat Anda memasak (Aktivitas, Aset, Partner).</li>
                                <li><strong>Pondasi (Financial):</strong> Kasir tempat uang masuk dan buku tagihan tempat uang keluar (Revenue & Cost).</li>
                            </ul>
                        </p>
                    </div>

                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- COLUMN 1: Front Stage + Revenue -->
                        <div>
                            <h4 class="font-bold text-indigo-600 dark:text-indigo-400 border-b border-gray-200 pb-2 mb-4 uppercase tracking-wider"><i class="fas fa-store mr-2"></i> PANGGUNG DEPAN (YANG DILIHAT PELANGGAN)</h4>

                            <div class="space-y-6">
                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">1. Customer Segments (Target Pasar)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Siapa manusianya?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Jangan bilang "Semua Orang". Tembakan Anda harus jitu.</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li><strong>Salah:</strong> Pecinta Kopi.</li>
                                        <li><strong>Benar:</strong> Mahasiswa yang butuh wifi kencang & kopi murah buat nugas malam.</li>
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">2. Value Propositions (Solusi/Keunggulan)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Kenapa mereka harus pilih Anda?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Apa obat sakit kepala yang Anda tawarkan buat masalah mereka?</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li><strong>Masalah:</strong> Mahasiswa duitnya pas-pasan tapi butuh tempat nongkrong lama.</li>
                                        <li><strong>Solusi Anda:</strong> Kopi Enak Cuma 10 Ribu + Free Wifi 24 Jam.</li>
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">3. Channels (Jalur Distribusi)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Gimana caranya ketemu?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Jembatan penghubung antara produk Anda dan pelanggan.</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li><strong>Awareness:</strong> Iklan TikTok, Selebgram Lokal.</li>
                                        <li><strong>Purchase:</strong> GoFood, GrabFood, Kedai Fisik.</li>
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">4. Customer Relationships (Hubungan)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Gimana biar gak putus?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Cara bikin mereka beli lagi, lagi, dan lagi (Retensi).</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li>Kartu Member (Beli 10 Gratis 1).</li>
                                        <li>Admin WA yang super ramah & fast response.</li>
                                    </ul>
                                </div>

                                 <div class="mt-4 pt-4 border-t border-dashed">
                                    <strong class="text-lg text-green-600 dark:text-green-400 block"><i class="fas fa-coins mr-1"></i> 5. Revenue Streams (Sumber Cuan)</strong>
                                    <p class="text-gray-700 dark:text-gray-300">Keran uangnya dari mana saja?</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1">
                                        <li>Jual Kopi (Utama).</li>
                                        <li>Jual Roti Bakar (Sampingan).</li>
                                        <li>Jual Biji Kopi Kemasan (Produk tambahan).</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- COLUMN 2: Back Stage + Cost -->
                        <div>
                            <h4 class="font-bold text-orange-600 dark:text-orange-400 border-b border-gray-200 pb-2 mb-4 uppercase tracking-wider"><i class="fas fa-tools mr-2"></i> PANGGUNG BELAKANG (DAPUR)</h4>

                            <div class="space-y-6">
                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">6. Key Resources (Aset Wajib)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Apa senjata perangnya?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Hal-hal yang HARUS Anda punya. Kalau gak ada ini, bisnis mati.</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li><strong>Fisik:</strong> Mesin Espresso, Ruko, Motor Delivery.</li>
                                        <li><strong>Manusia:</strong> Barista Jago, Koki.</li>
                                        <li><strong>Intelektual:</strong> Resep Rahasia.</li>
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">7. Key Activities (Kegiatan Kunci)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Sehari-hari ngapain aja?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Rutinitas paling krusial buat menghasilkan uang.</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li><strong>Produksi:</strong> Belanja ke pasar, Roasting kopi, Masak.</li>
                                        <li><strong>Marketing:</strong> Bikin konten TikTok, Reply komen IG.</li>
                                    </ul>
                                </div>

                                <div>
                                    <strong class="text-lg text-gray-900 dark:text-white block">8. Key Partners (Partner Kunci)</strong>
                                    <p class="text-gray-600 dark:text-gray-400 italic mb-1">"Siapa teman mainnya?"</p>
                                    <p class="text-gray-700 dark:text-gray-300">Pihak luar yang bikin hidup Anda lebih mudah. Jangan kerja sendirian!</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded">
                                        <li>Supplier Kopi (Biar stok aman).</li>
                                        <li>Abang Gojek/Grab (Biar gak repot antar sendiri).</li>
                                        <li>Influencer Lokal (Biar dipromosiin).</li>
                                    </ul>
                                </div>

                                <div class="mt-4 pt-4 border-t border-dashed">
                                    <strong class="text-lg text-red-600 dark:text-red-400 block"><i class="fas fa-file-invoice-dollar mr-1"></i> 9. Cost Structure (Struktur Biaya)</strong>
                                    <p class="text-gray-700 dark:text-gray-300">Uang Anda paling banyak bocor buat bayar apa?</p>
                                    <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400 mt-1">
                                        <li><strong>Fixed Cost (Tetap):</strong> Sewa Ruko, Gaji Karyawan, Wifi.</li>
                                        <li><strong>Variable Cost (Berubah):</strong> Beli Susu, Beli Biji Kopi, Cup Plastik.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700 text-center">
                        <strong class="block text-yellow-800 dark:text-yellow-200 mb-1">Tips Pro:</strong>
                        <p class="text-sm text-yellow-700 dark:text-yellow-300">Jangan pusing mau isi yang mana duluan. Biasanya dimulai dari <strong>Customer (Siapa)</strong> dulu, baru <strong>Value (Apa)</strong>. Tapi senyamannya Anda saja!</p>
                    </div>

                </div>
            </div>
            <div class="p-4 border-t dark:border-gray-700 flex justify-end shrink-0 bg-gray-50 dark:bg-gray-800 rounded-b-lg">
                <button onclick="window.closeModals()" class="px-8 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition shadow-lg transform hover:scale-105 uppercase">Siap, Saya Paham!</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg p-6" onclick="event.stopPropagation()">
            <h3 id="modalTitle" class="text-lg font-bold mb-1 dark:text-white">Judul</h3>
            <p id="modalDesc" class="text-xs text-gray-500 dark:text-gray-400 mb-3">Deskripsi</p>
            <textarea id="modalInput" rows="6" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm" placeholder="Isi di sini..."></textarea>
            <div class="mt-4 flex justify-end gap-2">
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white dark:border-gray-600 uppercase">Batal</button>
                <button onclick="window.saveData()" class="px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 uppercase">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Analysis Edit Modal -->
    <div id="analysisEditModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl p-6 h-[80vh] flex flex-col" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-4 dark:text-white"><i class="fas fa-edit mr-2"></i> Edit Hasil Analisa</h3>
            <textarea id="analysisInput" class="flex-grow w-full p-4 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm font-mono focus:ring-2 focus:ring-blue-500 outline-none resize-none" placeholder="Hasil analisa (Markdown)..."></textarea>
            <div class="mt-4 flex justify-end gap-2 shrink-0">
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white dark:border-gray-600 uppercase">Batal</button>
                <button onclick="window.saveEditAnalysis()" class="px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 font-bold shadow-lg uppercase">Simpan Perubahan</button>
            </div>
        </div>
    </div>

    <!-- Action Plan Modal -->
    <div id="actionPlanModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl p-0 h-[85vh] flex flex-col" onclick="event.stopPropagation()">
            <div class="bg-teal-600 px-6 py-4 flex justify-between items-center shrink-0 rounded-t-lg">
                <h3 class="text-lg font-bold text-white"><i class="fas fa-list-check mr-2"></i> Action Plan (30 Hari)</h3>
                <button onclick="window.closeModals()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
            </div>

            <div id="actionPlanContent" class="p-6 overflow-y-auto custom-scroll flex-grow prose dark:prose-invert max-w-none text-sm bg-gray-50 dark:bg-gray-900/50">
                <div class="flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400">
                    <i class="fas fa-clipboard-list text-6xl mb-4 opacity-20"></i>
                    <p>Belum ada Action Plan.</p>
                </div>
            </div>

            <div class="p-4 border-t dark:border-gray-700 flex justify-between shrink-0 bg-white dark:bg-gray-800 rounded-b-lg gap-2">
                <button onclick="window.downloadActionPlanPDF()" class="px-4 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg font-bold text-sm transition uppercase"><i class="fas fa-file-pdf mr-2"></i> Download PDF</button>
                <button onclick="window.generateActionPlan()" id="btnGenAction" class="px-6 py-2 bg-teal-600 text-white rounded-lg font-bold hover:bg-teal-700 transition shadow-lg uppercase"><i class="fas fa-magic mr-2"></i> Buat Rencana Aksi</button>
            </div>
        </div>
    </div>

    <!-- AI Prompt Modal -->
    <div id="aiModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-2 dark:text-white">Buat Contoh Bisnis</h3>
            <p class="text-sm text-gray-500 mb-4">Masukkan ide bisnis, AI akan mengisi semua kotak.</p>
            <input id="aiTopic" type="text" placeholder="Contoh: 'Toko Bunga'" class="w-full p-3 border rounded-lg mb-4 dark:bg-gray-700 dark:border-gray-600 dark:text-white text-sm" onkeypress="if(event.key==='Enter') window.runAi()">
            <div class="flex justify-end gap-2">
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white dark:border-gray-600 uppercase">Batal</button>
                <button onclick="window.runAi()" class="px-4 py-2 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700 uppercase">Buat</button>
            </div>
        </div>
    </div>

    <!-- Image Prompt Modal -->
    <div id="imgModal" class="fixed inset-0 z-50 hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-xl p-6" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-2 dark:text-white">Prompt Infografis AI</h3>
            <p class="text-sm text-gray-500 mb-2">Salin teks ini ke Midjourney/DALL-E:</p>
            <textarea id="imgPromptText" rows="8" readonly class="w-full p-3 border rounded-lg bg-gray-50 text-xs font-mono dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
            <div class="mt-4 flex justify-end gap-2">
                <button onclick="window.copyToClipboard(document.getElementById('imgPromptText').value)" class="px-4 py-2 bg-purple-100 text-purple-700 rounded text-sm font-bold uppercase">Copy</button>
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white dark:border-gray-600 uppercase">Tutup</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="fixed inset-0 z-[60] hidden bg-gray-900/75 flex items-center justify-center p-4" onclick="window.closeModals()">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6" onclick="event.stopPropagation()">
            <h3 class="text-lg font-bold mb-2 text-red-600">Hapus Data?</h3>
            <p class="text-sm text-gray-500 mb-4">Semua data akan hilang permanen.</p>
            <div class="flex justify-end gap-2">
                <button onclick="window.closeModals()" class="px-4 py-2 border rounded text-sm dark:text-white uppercase">Batal</button>
                <button id="confirmYesBtn" class="px-4 py-2 bg-red-600 text-white rounded text-sm uppercase">Ya, Hapus</button>
            </div>
        </div>
    </div>

    <div id="loader" class="hidden fixed inset-0 z-[100] bg-white/90 dark:bg-gray-900/90 flex flex-col items-center justify-center">
        <i class="fas fa-circle-notch fa-spin text-5xl text-blue-600 mb-4"></i>
        <p class="font-bold text-lg dark:text-white">AI Sedang Bekerja...</p>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
